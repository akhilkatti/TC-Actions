apply plugin: 'java'
apply plugin: 'maven-publish'

group = 'com.github.jitpack'
version = '2.0'

sourceCompatibility = 1.8 // java 8
targetCompatibility = 1.8

repositories {
  mavenCentral()
}

dependencies {
  implementation 'com.google.guava:guava:29.0-jre'
}

java {
	withSourcesJar()
	withJavadocJar()
}

publishing {
    publications {
        maven(MavenPublication) {
		from components.java
        }
    }
}
MainClassName = 'Hello'

jar {
  manifest {
    attributes(
      'Main-Class': MainClassName
    )
  }
  archiveFileName = 'muthu.jar'
  destinationDirectory = file('build/libs')
}

task installBabylon (type: Exec) {
	inputs.files 'src/main/java/react/package.json'
	outputs.dir 'src/main/java/react/node_modules'
    workingDir 'src/main/java/react'
    commandLine getProperty("npm") + ['install']
}

task compileBabylon (type: Exec){
    dependsOn installBabylon
	inputs.files 'src/main/java/react'
	outputs.dir 'build/reactjs'
    workingDir 'src/main/java/react'
    commandLine getProperty("yarn") + ['build', '--silent']
}

wrapper {
    gradleVersion = "7.3.3"
    distributionType = Wrapper.DistributionType.ALL
}
